<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=windows-1251">
<title>АВТ ВоГУ - Схема данных БД "Автовокзал"</title>
<style>
body {background: #CFCFCF; font-size:12pt; color: black; }
</style>
</head>
<body>

<h2 align=center>Схема данных БД "Автовокзал"</h2>
Особенности отправки SQL-запросов в проверяющую систему смотрите в <a href="/cgi-bin/plain_text.pl?url=/faq.html#sql">FAQ</a>.<br>
В частности, всем вычисляемым полям необходимо явно давать имена длиной до 30 символов, например, так:
<table><tr><td>
<div class="code_box"><pre><code class="sql">select min(price) as minpr from km_prices</code></pre></div>
</td></tr></table>
<br>
Схема данных представлена на следующем рисунке:
<p align=center style='text-align:center'><img src="/problems/sql/image001.gif"></p>
<br>
<style>
ol li {font-size:14pt; margin:20px;}
ol ul li {margin:5px;font-size:12pt;}
</style>
<ol style="">
<li>km_prices (расценки за километр)
<ul>
<li>class(класс автобуса)
<li>price (цена за км для данного класса)
</ul>
<li>models (марки или модели автобусов) 
<ul>
<li>cod_model (код, суррогатный ключ)
<li>name_model (название, атрибут носит справочный характер)
<li>places (количество мест в автобусах данной марки)
<li>class (класс комфортности)
</ul>
<li>buses (автобусы)
<ul>
<li>cod_bus (код автобуса, возможно его инвентарный номер)
<li>bus_number (номер ГИБДД, атрибут носит чисто справочный характер)
<li>cod_model (марка автобуса, внешний ключ)
</ul>
<li>points (населенные пункты)
<ul>
<li>cod_point (код, суррогатный ключ)
<li>name_point (название)
<li>distance (расстояние от пункта отправления)
</ul>
<li>routes (маршруты)
<ul>
<li>cod_route (код, суррогатный ключ)
<li>name_route (название маршрута)
</ul>
<li>points_routes (связь между пунктами и маршрутами)
<ul>
<li>cod_point (код пункта, внешний ключ)
<li>cod_route (код маршрута, внешний ключ)
</ul>
<li>trips (рейсы)
<ul>
<li>cod_trip (код рейса, суррогатный ключ)
<li>week_day (день недели)
<li>hour (часы)
<li>minute (минуты)
<li>cod_route (код маршрута)
<li>cod_bus (код автобуса, назначенного на данный рейс)
<li>tickets (количество проданных билетов)
</ul>
</ol>

<h3>Некоторые пояснения.</h3>
Пункты и маршруты имеют связь "Многие-ко-Многим" (через каждый пункт может проходить несколько маршрутов и каждый маршрут имеет несколько остановок). Для этого служит таблица-связка points_routes.<br><br>
Сущность trips (рейсы) связывает сущности Маршруты и Автобусы, дополняя их такими важными атрибутами как время отправления. Здесь же фиксируется и количество проданных билетов на каждый рейс (после отправления рейса поле обнуляется).<br><br>
Дни недели в trips - числа от 1 до 7, где 1 - понедельник, 2 - вторник и т.д.<br><br>
Номера и марки автобусов, названия маршрутов, названия населенных пунктов уникальны<br><br>
Допустимо наличие маршрутов, не используемых ни в одном рейсе. Могут быть населённые пункты, не используемые ни в одном маршруте, маршруты, в которые ещё не включены никакие пункты, автобусы, не задействованные ни в одном рейсе. Аналогично, в базе может содержаться марка автобуса, но не быть ни одного автобуса такой марки.<br><br>

<pre>
Варианты заданий:
№	Номера заданий
-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	
1	1	5	10	15	20	25	30	35	40	45	50	55	60	65
2	2	6	11	16	21	26	31	36	41	46	51	56	61	66
3	3	7	12	17	22	27	32	37	42	47	52	57	62	67
4	4	8	13	18	23	28	33	38	43	48	53	58	63	68
5	1	9	14	19	24	29	34	39	44	49	54	59	64	65
6	2	5	10	15	21	27	33	38	43	45	51	57	63	69
7	3	6	11	17	23	29	32	35	40	46	52	58	64	69
8	4	8	12	18	22	26	31	37	42	47	53	56	62	66
9	2	7	14	16	24	28	34	36	41	48	50	59	61	65
10	1	9	13	15	23	27	32	38	40	45	52	57	64	68
11	4	6	12	17	22	28	30	36	42	48	54	56	63	67
12	3	8	11	18	21	25	31	37	42	49	50	56	60	66
13	1	8	13	16	23	26	33	35	44	47	51	55	62	69
14	2	5	12	15	20	28	34	38	40	46	53	59	62	68
15	4	7	10	19	22	27	33	39	41	47	52	58	61	65
16	2	6	13	18	24	25	32	36	44	45	53	57	64	66
17	3	5	12	16	22	26	30	37	44	48	51	55	60	69
18	3	7	10	16	21	25	31	37	42	49	50	56	63	67
19	1	8	11	17	22	28	33	35	43	45	54	57	60	66
20	2	8	14	15	23	28	32	36	40	45	53	59	64	68
21	4	5	13	16	20	27	32	39	42	46	53	55	62	65
22	4	9	10	17	21	25	33	35	44	45	52	59	63	66
23	3	5	12	15	24	25	33	36	41	49	50	56	61	68
</pre>

</body>
</html>
